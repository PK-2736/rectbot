name = "rectbot-backend"
account_id = "74749d85b9c280c0daa93e12ea5d5a14"
route = "https://api.rectbot.tech/*"
main = "index.js"
compatibility_date = "2025-09-11"
workers_dev = false

# KVは使用しないため削除
# kv_namespaces は削除済み

# 環境変数は GitHub Actions で動的に設定されます
[vars]
# GitHub Actions が自動で以下の環境変数を追加します:
# - REACT_APP_DISCORD_CLIENT_ID
# - REACT_APP_DISCORD_REDIRECT_URI  
# - SUPABASE_URL
# - VPS_EXPRESS_URL (Cloudflare Tunnel経由、例: https://80cbc750-94a4-4b87-b86d-b328b7e76779.cfargotunnel.com)
#
# シークレットは wrangler secret put コマンドで設定されます:
# - DISCORD_CLIENT_SECRET
# - SUPABASE_SERVICE_ROLE_KEY
# - SERVICE_TOKEN

TUNNEL_URL = "http://localhost:3000"
BACKEND_API_URL = "http://localhost:3000"

[env.production]
name = "rectbot-worker-prod"

[env.production.vars]
TUNNEL_URL = "https://your-tunnel-url.trycloudflare.com"
BACKEND_API_URL = "https://your-tunnel-url.trycloudflare.com"

# Secrets (run: wrangler secret put <SECRET_NAME>)
# - SERVICE_TOKEN
# - DISCORD_CLIENT_SECRET
# - SESSION_SECRET